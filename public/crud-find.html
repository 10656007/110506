<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1">

    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Snippet' rel='stylesheet' type='text/css'>
    
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@500&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500&display=swap" rel="stylesheet">
    
    <title>養老院搜尋</title>

  </head>

  <body>
      <nav class="navb">       
    <div class="page-header2" id="banner">
        <h1><a><img id="img" src="../images/logo1.png"><small id="small">樂活網</small></a></h1>
        <ul class="inline-block-nav">
            
            
            <input type="button" value="首頁" onclick="location.href='./crud-loby.html'"
            style="width:120px;height:40px;font-size:20px;">
            <input type="button" value="政府資訊" onclick="location.href='https://1966.gov.tw/LTC/cp-4495-48857-201.html'"
            style="width:120px;height:40px;font-size:20px;">
            
        </ul>
		<!--要加圖片 <h1><a><img id="img" src=""><small id="small">樂活網</small></a></h1> -->
	</div>
</nav>
    <!-- <div class="fade-in title">
		<div id="title">
		<h1 class="centerTitle">專題報告110506</h1>
		</div>
	</div> -->

    <div class="fade-in">
		<div class="row">
            
            <div class="col-sm-5">
				<div class="leftModal"><i>
                   
					<div>
                        <h3 class="leftModalText">台北市各區養老院<br>
                        找到你喜歡或符合需求的<p>
                        配合政府資訊</h3>
                        <h2><a><img id="img" src="../images/view.jpg"></a></h2>		
					</div></i>
				</div>
			</div>

            

        <div class="col-sm-1 middle-border"></div>
        
        <div class="col-sm-1">
            <div class="form-box">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="form-group2">
                            <label class="mLabels">地區</label>
                            <div class="form-check">
                                <select name="area" id="area" class="place">
                                <option value="北投區">北投區</option>
                                <option value="士林區">士林區</option>
                                <option value="大同區">大同區</option>
                                <option value="中山區">中山區</option>
                                <option value="松山區">松山區</option>
                                <option value="內湖區">內湖區</option>
                                <option value="萬華區">萬華區</option>
                                <option value="中正區">中正區</option>
                                <option value="大安區">大安區</option>
                                <option value="信義區">信義區</option>
                                <option value="南港區">南港區</option>
           
                                </select>

                                <!-- <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                <label class="form-check-label" for="inlineCheckbox1">北投區</label>                             
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">士林區</label>                             
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">大同區</label>                             
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">中山區</label>                              
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">松山區</label>                              
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">內湖區</label>                              
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">萬華區</label>                             
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">中正區</label>                              
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">大安區</label>                              
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">信義區</label>                             
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">南港區</label>                              
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">文山區</label> -->
                              </div>
                                    <div class="col-xs-61">
                                        <label class="mLabels">預算</label>
                                        <select name="area" id="area" class="money">
                                        <option value="15000">15000</option>
                                        <option value="20000">20000</option>
                                        <option value="25000">25000</option>
                                        <option value="30000">30000</option>
                                        <option value="35000">35000</option>
                                        <option value="40000">40000</option>
                                        <option value="45000">45000</option>
                                        <option value="50000">50000</option>
                                       
                                        </select>
                                        <select name="area" id="area" class="money">
                                            <option value="15000">15000</option>
                                            <option value="20000">20000</option>
                                            <option value="25000">25000</option>
                                            <option value="30000">30000</option>
                                            <option value="35000">35000</option>
                                            <option value="40000">40000</option>
                                            <option value="45000">45000</option>
                                            <option value="50000">50000</option>
                                           
                                            </select>
                                        <!-- <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">0-5000</label> 
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">5000-10000</label>
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">10000-15000</label>                                     
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">15000-20000</label>                                            
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">20000-25000</label>                                       
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">25000-30000</label>                                           
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">30000以上</label>
                                    </div> -->
                           
                                <div class="att">
                                <label class="mLabels3">屬性</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">公立</label> 
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">私立</label> 
                                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                            <label class="form-check-label" for="inlineCheckbox1">民營</label>
                        </div>

    <!-- Test Function -->
    <button onclick="location.href='./final.html'" class="search">搜尋</button>


    <!-- Import the basic jquery lib. -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>  
    <!-- Import the associated firebase lib which the order is fixed. -->
    <script defer src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.0.1/firebase-storage.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.0.1/firebase-database.js"></script>
    <!-- Set the firebsae config and initialize it. -->
    <script defer src="init-firebase.js"></script>
    <!-- Test Code -->
    <script>
        // Variables
        var usr = {};

        $(document).ready(function() {
            var dbRef = firebase.database(); // firebase.database() is jquery language.
            //路徑
            var msgRef = dbRef.ref('/使用者資料/');

            var msgRead = dbRef.ref('/地區/');
            
            // Database - CRUD
            // Push (C)
            // 基本資訊
            $('btn').on('click', function() {
                msgRead.get().then((snapshot) => {
                if (snapshot.exists()) {
                    console.log(snapshot.val());
                } else {
                    console.log("No data available");
                }
                }).catch((error) => {
                console.error(error);
                });
            });

            
            // Read (R)
            msgRef.on('value', function(snapshot) {
            var val = snapshot.val();
            let list = '';
            
            $.each(val, function(i, item) {
                console.log('each: ', i, item.message);
                list = `${list}<li>${item.message}`;
                });
                $('#ul').html(list);
            });
            
            // Update (U)
            $('#ul').on('click', '.update', function() {
                var key = $(this).data('key');
                var newMsg = $('#input_' + key).val();
                var postData = {
                    message: newMsg
                }
                var updates = {};
                updates['/messages/' + key] = postData;
                firebase.database().ref().update(updates);
            });
            
            // Delete (D)
            $('#ul').on('click', '.remove', function(){
                var key = $(this).data('key');
                msgRef.child(key).remove();
            });
            
            // Storage - CRUD
            var strgRef = firebase.storage().ref('/uploads/');
            
            var metadata =  {
                contentType: 'image/jepg'
            }
            
            // Push (C) - File & Image
            $('#uplaodFile').on('click', function() {
                var file = $('#uplaodsFile').prop('files')[0];
                var imgRef = strgRef.child(file.name);
                
                // console.log(file);
                
                imgRef.put(file).then(function(snapshot) {
                    console.log('Uploaded a blob or file!');
                });
                
            });

            // Push (C) - Unit8Array
            $('#uploadutf8').on('click', function() {
                var u8aRef = firebase.storage().ref('Unit8Array').child('test');
                // Uint8Array
                var bytes = new Uint8Array([0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x2c, 0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64, 0x21]);
                u8aRef.put(bytes).then(function(snapshot) {
                    console.log('Uploaded an array!');
                });
            });

            // Push (C) - String
            $('#uplaodString').on('click', function() {
                var strRef = firebase.storage().ref('String').child('00001');

                var msg = '5b6p5Y+344GX44G+44GX44Gf77yB44GK44KB44Gn44Go44GG77yB';
                strRef.putString(msg, 'base64').then(function(snapshot) {
                    console.log('Uploaded a base64 string!');
                });
            });
            

            // Read (R)


            // Download (R)
            $('#show').on('click', function() {
                var imgName = 'USPS.jpg'
                var pathRef = strgRef.child(imgName);
                // var gsRef = firebase.storage().refFromURL('gs://bucket/uploads/' + imgName);
                // var httpRef = firebase.storage().refFromURL('https://firebasestorage.googleapis.com/b/bucket/o/uploads/' + imgName);

                pathRef.getDownloadURL().then(function(url) {
                    console.log(url);

                    // This can be downloaded directly:
                    // var xhr = new XMLHttpRequest();
                    // xhr.responseType = 'blob';
                    // xhr.onload = function(event) {
                    //     var blob = xhr.response;
                    // };
                    // xhr.open('GET', url);
                    // xhr.send();

                    // $('#shown_img').attr('src', url);
                    var img = document.getElementById('shown_img');
                    img.src = url;
                }).catch(function(e) {
                    switch(e.code) {
                        case 'storage/object-not-found':
                        // File doesn't exist
                        break;

                        case 'storage/unauthorized':
                        // User doesn't have permission to access the object
                        break;

                        case 'storage/canceled':
                        // User canceled the upload
                        break;

                        case 'storage/unknown':
                        // Unknown error occurred, inspect the server response
                        break;
                    }
                });

            });
            
            // Delete (D)
            $('#delete').on('click', function() {
                var delImgRef = strgRef.child('Cover.png');

                delImgRef.delete().then(function() {
                    console.log('Delete Image.');
                }).catch(function(e) {
                    console.log(e);
                });
            });
            
            // Cookie
            $('#next').on('click', function() {
                document.cookie = "username=RobbenHsieh";
                window.location.replace('html/receieve.html');
                console.log("1st Page: " + document.cookie);
            });

        });
    </script>
  </body>
</html>
